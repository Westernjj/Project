{% extends "shop/layout.html" %}
{% block title %}Вхід{% endblock %}

{% block content %}
<h2>Вхід</h2>
<form method="post">
  {% csrf_token %}
  {{ form.username.label_tag }}<br>
  {{ form.username }}<br><br>

  {{ form.password.label_tag }}<br>
  <div class="password-input">
    {{ form.password }}
    <button type="button" class="toggle-password" data-target="id_password" aria-label="Показати пароль" title="Показати пароль">
      <svg viewBox="0 0 24 24" aria-hidden="true">
        <path d="M12 5c-5 0-9 5-9 7s4 7 9 7 9-5 9-7-4-7-9-7zm0 12a5 5 0 1 1 0-10 5 5 0 0 1 0 10z"/>
      </svg>
    </button>
  </div>

  <br>
  <button type="submit">Увійти</button>
</form>
{% endblock %}

{% block extra_css %}
<style>
  .password-input{position:relative;display:inline-block;max-width:320px;width:100%}
  .password-input input{width:100%;padding-right:38px}
  .toggle-password{position:absolute;right:8px;top:50%;transform:translateY(-50%);border:none;background:transparent;padding:4px;cursor:pointer}
  .toggle-password svg{width:22px;height:22px}
</style>
{% endblock %}

{% block extra_js %}
<script>
  (function(){
    var btn=document.querySelector('.toggle-password');
    if(!btn) return;
    var input=document.getElementById(btn.dataset.target);
    function setIcon(v){
      btn.title=v?'Приховати пароль':'Показати пароль';
      btn.setAttribute('aria-label', btn.title);
      btn.innerHTML=v?'<svg viewBox="0 0 24 24"><path d="M2 12s4-7 10-7c1.6 0 3 .4 4.3 1.1l-1.6 1.6A7.2 7.2 0 0 0 12 7C7.6 7 4.2 10.9 3.2 12c.3.4 1 .9 1.8 1.6l-1.4 1.4C2.8 14.2 2 13.1 2 12zm20 0c0 .9-.8 2.2-1.6 3L20 16c.8-.7 1.5-1.2 1.8-1.6-.8-1-4.2-5-8.6-5-.7 0-1.5.1-2.1.3l1.6-1.6C13 7.4 14.4 7 16 7c6 0 10 7 10 7zM4.4 20.5 3 19.1 19.1 3l1.4 1.4L4.4 20.5z"/></svg>'
                   :'<svg viewBox="0 0 24 24"><path d="M12 5c-5 0-9 5-9 7s4 7 9 7 9-5 9-7-4-7-9-7zm0 12a5 5 0 1 1 0-10 5 5 0 0 1 0 10z"/></svg>';
    }
    setIcon(false);
    btn.addEventListener('click',function(){
      var vis=input.type==='password';
      input.type=vis?'text':'password';
      setIcon(vis);
      input.focus();
    });
  })();
</script>
{% endblock %}
